<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Dynamic Table Form</title>
  <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        select {
            width: 100%;
            padding: 5px;
        }
    </style>
</head>
<body>
<h1>Dynamic Table Form</h1>

<form th:action="@{/match/fill_playoff_stage/{stageId}(stageId=${stageId})}" method="post">
  <table>
    <thead>
    <tr>
      <th>Команда 1</th>
      <th>Команда 2</th>
      <th>Слот</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="match, rowStat : ${matches}">
      <td>
        <select th:name="[__${rowStat.index}__].team1">
          <option value="" selected>-- Select --</option>
          <option th:each="team : ${teams}"
                  th:value="${team.id}"
                  th:text="${team.name}"
                  th:selected="${match.team1.id == team.id}"></option>
        </select>
      </td>
      <td>
        <select th:name="[__${rowStat.index}__].team2">
          <option value="" selected>-- Select --</option>
          <option th:each="team : ${teams}"
                  th:value="${team.id}"
                  th:text="${team.name}"
                  th:selected="${match.team2.id == team.id}"></option>
        </select>
      </td>
      <td>
        <select th:name="rows[__${rowStat.index}__].slot">
          <option value="" selected>-- Select --</option>
          <option th:each="slot : ${slots}"
                  th:value="${slot.id}"
                  th:text="${#temporals.format(slot.date, 'yyyy-MM-dd') + ' - ' + #temporals.format(slot.time, 'HH:mm') + ' - ' + slot.location.name}"
                  th:selected="${match.slot != null && match.slot.id == slot.id }"></option>
        </select>
      </td>
    </tr>
    <tr th:each="i : ${#numbers.sequence(notFilledMatches, matchesCount)}">
      <td>
        <select th:name="[__${i}__].team1">
          <option value="" selected>-- Select --</option>
          <option th:each="team : ${teams}"
                  th:value="${team.id}"
                  th:text="${team.name}"
                  ></option>
        </select>
      </td>
      <td>
        <select th:name="[__${i}__].team2">
          <option value="" selected>-- Select --</option>
          <option th:each="team : ${teams}"
                  th:value="${team.id}"
                  th:text="${team.name}"
                  ></option>
        </select>
      </td>
      <td>
        <select th:name="rows[__${i}__].slot">
          <option value="" selected>-- Select --</option>
          <option th:each="slot : ${slots}"
                  th:value="${slot.id}"
                  th:text="${#temporals.format(slot.date, 'yyyy-MM-dd') + ' - ' + #temporals.format(slot.time, 'HH:mm') + ' - ' + slot.location.name}"></option>
        </select>
      </td>



    </tr>




    </tbody>
  </table>

  <button type="submit">Submit</button>
</form>
</body>
</html>